# SmartBuoy – AI agent guidance

This repo is the **SmartBuoy marketing/website**: an Astro static site with TypeScript, React, Tailwind, and Sanity CMS. Use this file to work efficiently and avoid breaking generated artifacts or workflows.

## Tech stack

- **Framework**: Astro 5, TypeScript 5.9
- **UI**: React 19, Tailwind CSS, MDX for blog
- **Content**: Sanity CMS; blog posts in `src/data/post/` (MD/MDX)
- **i18n**: Default locale `en`; `de` under `src/pages/de/`
- **Deploy**: Netlify (Astro Netlify adapter), Docker/nginx available

## Commands

| Command | Purpose |
|--------|--------|
| `npm run dev` / `npm start` | Dev server (runs statistics generator first) |
| `npm run build` | Production build (runs statistics generator first) |
| `npm run preview` | Preview production build |
| `npm run check` | Astro check + ESLint + Prettier |
| `npm run fix` | ESLint --fix + Prettier write |

**Node**: `^18.17.1 || ^20.3.0 || >= 21.0.0` (see `package.json` engines).

## Generated files – do not edit

- **`src/generated/statistics.ts`** – Auto-generated by `scripts/generate-statistics.mjs`.  
  **Do not edit this file.** Change behavior or data shape only in the script or in the API it calls.  
  The script runs automatically before `dev` and `build` (via `predev` / `prebuild`).  
  Optional env: `STATISTICS_API_URL`, `STATISTICS_API_KEY`; `.env` / `.env.local` and mode-specific files are loaded by the script.

## Where to change things

- **Pages/routes**: `src/pages/` (including `src/pages/de/` for German).
- **Layouts**: `src/layouts/`.
- **Components**: `src/components/` (Astro + React).
- **Blog content**: `src/data/post/` (MD/MDX); collection schema in `src/content/config.ts`.
- **Styles**: `src/assets/styles/` (e.g. Tailwind, common.css).
- **Config**: `astro.config.mjs`, `tailwind.config.mjs`, `src/config.yaml`, `src/navigation.ts`.
- **Sanity**: `schemas/` for CMS schemas; `src/utils/sanity.ts` for client usage.

## Workflow tips

1. Before suggesting edits to statistics or counts, check whether the data comes from `src/generated/statistics.ts`; if so, suggest changes to `scripts/generate-statistics.mjs` or env/API, not the generated file.
2. Run `npm run check` (and `npm run fix` if needed) when changing code.
3. New blog posts go in `src/data/post/` and must match the collection schema in `src/content/config.ts`.
4. For new pages, follow existing patterns in `src/pages/` and use the same layouts and i18n structure where applicable.
