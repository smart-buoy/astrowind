---
import { getLangFromUrl, useTranslations } from '~/i18n/utils';
import Hero2 from '~/components/widgets/Hero2.astro';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import AboutTimeline from '~/components/widgets/AboutTimeline.astro';
import { formatTranslationRichText } from '~/i18n/richText';
import Headline from '~/components/ui/Headline.astro';

const language = getLangFromUrl(Astro.url);
const t = useTranslations(language);

import aboutImage from '~/assets/images/ueberuns.jpg';

const tr = (key: string) => formatTranslationRichText(t(key) as string);
const bullets = (t('about.story.bullets') as string).split('|').map((item) => item.trim());
const paragraphClass = 'text-lg leading-relaxed text-muted dark:text-slate-300';
const aboutHeadlineTitleClass = 'text-2xl sm:text-3xl tracking-tight dark:text-white';
---

<Hero2
  tagline={t('about.hero.tagline')}
  image={{
    src: aboutImage.src,
    alt: 'SmartBuoy team on the water',
    width: aboutImage.width,
    height: aboutImage.height,
  }}
>
  <Fragment slot="title">
    <span class="text-primary dark:text-white highlight">{t('about.hero.title')}</span> <br />
    {t('about.hero.subtitle')}
  </Fragment>

  <Fragment slot="subtitle"></Fragment>
</Hero2>

<WidgetWrapper id="intro" containerClass="max-w-5xl">
  <div class="max-w-none text-left">
    <p class={paragraphClass} set:html={tr('about.intro.paragraph1')}></p>
    <Headline
      title={tr('about.intro.subheadline')}
      classes={{
        container: 'mt-6 mb-6 md:mb-6 text-left md:mx-0 max-w-none',
        title: `${aboutHeadlineTitleClass} text-primary dark:text-primary`,
      }}
    />
  </div>
</WidgetWrapper>

<WidgetWrapper id="story" containerClass="max-w-5xl">
  <div class="max-w-none text-left">
    <Headline
      title={tr('about.story.title')}
      classes={{
        container: 'mb-6 md:mb-6 text-left md:mx-0 max-w-none',
        title: aboutHeadlineTitleClass,
      }}
    />
    <p class={paragraphClass} set:html={tr('about.story.paragraph1')}></p>
    <p class={paragraphClass} set:html={tr('about.story.paragraph2')}></p>
    <ul class={`list-disc pl-6 space-y-2 my-6 ${paragraphClass}`}>
      {bullets.map((item) => (
        <li>
          <span set:html={formatTranslationRichText(item)}></span>
        </li>
      ))}
    </ul>
    <p class={paragraphClass} set:html={tr('about.story.conclusion')}></p>
  </div>
</WidgetWrapper>

<AboutTimeline />
